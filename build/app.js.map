{"version":3,"sources":["../app.js"],"names":["bodyParser","require","mongoose","express","app","passport","LocalStrategy","User","flash","methodOverride","set","use","urlencoded","extended","static","__dirname","connect","process","env","dbUrl","secret","resave","saveUninitialized","initialize","session","authenticate","serializeUser","deserializeUser","req","res","next","locals","error","success","authRoutes","userRoutes","commentsRoutes","addsRoutes","submissionRoutes","paymentRoutes","messageRoutes","groupRoutes","notifRoutes","amazons3Routes","get","render","loggedIn","listen","PORT","IP","console","log"],"mappings":"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","file":"app.js","sourcesContent":["// Require\nvar\n    bodyParser     = require(\"body-parser\"),\n    mongoose       = require(\"mongoose\"),\n    express        = require(\"express\"),\n    app            = express(),\n    passport       = require(\"passport\"),\n    LocalStrategy  = require(\"passport-local\"),\n    User           = require(\"./models/user\"),\n    flash          = require('connect-flash'),\n    methodOverride = require(\"method-override\");\n\n// App Config\napp.set('view engine', 'ejs'); \napp.use(bodyParser.urlencoded({extended : true})); // To parse the body of a request\napp.use(methodOverride('_method'));\napp.use(express.static(__dirname));\nmongoose.connect(process.env.dbUrl); // Initialize and maintain our db\n\n//mongoose.connect('mongodb://jaks19:royalmari2013@ds161950.mlab.com:61950/studyusa'); // Initialize and maintain our db\n\n// Passport Config (For Authentication)\napp.use(require(\"express-session\")({ \n    secret: \"xyz\",\n    resave: false,\n    saveUninitialized: false\n}));\n\n// More App Config\napp.use(flash());\napp.use(passport.initialize()); \napp.use(passport.session());    // Session tracking (Passport sees if user still online)\npassport.use(new LocalStrategy(User.authenticate())); //Strategy on how to authenticate. Provided in library passport-local-mongoose\npassport.serializeUser(User.serializeUser()); // Provide Hash/unhash method (already written in passport-local-mongoose)\npassport.deserializeUser(User.deserializeUser()); // Method for reverse of above (same lib: passport-local-mongoose)\n\napp.use(function(req, res, next){\n    res.locals.error = req.flash('error');\n    res.locals.success = req.flash('success');\n    next();\n});\n\n// Restful Routes\nvar \n    authRoutes          = require('./routes/auth'),\n    userRoutes          = require('./routes/users'),\n    commentsRoutes      = require('./routes/comments'),\n    addsRoutes          = require('./routes/adds'),\n    submissionRoutes    = require('./routes/submissions'),\n    paymentRoutes       = require('./routes/payments'),\n    messageRoutes       = require('./routes/messages'),\n    groupRoutes         = require('./routes/groups'),\n    notifRoutes         = require('./routes/notifs'),\n    amazons3Routes      = require('./routes/amazons3');\n\napp.use(authRoutes),\napp.use('/index', userRoutes);\napp.use('/index/:username/submit/:id/comments', commentsRoutes);\napp.use('/index/:username/submit/:id/adds', addsRoutes);\napp.use('/index/:username/submit/:id/s3/:subTitle', amazons3Routes);\napp.use('/index/:username/submit', submissionRoutes);\napp.use('/index/:username/pay', paymentRoutes),\napp.use('/index/:username/messages', messageRoutes),\napp.use('/index/:username/groups', groupRoutes),\napp.use('/index/:username/notifs', notifRoutes);\n\n// Wandering Routes\napp.get('/*', function(req, res){\n    res.render('index', {loggedIn: false});\n});\n\n// Index\napp.get('/', function(req, res) {\n    res.render('index', {loggedIn: false});\n});\n\n// Server On\napp.listen(process.env.PORT, process.env.IP, function(){\n    console.log(\"Portal Activated!\");\n});"]}