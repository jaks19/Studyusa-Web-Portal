{"version":3,"sources":["../../front-end/frontEndS3Download.js"],"names":["$","click","e","target","value","id","preventDefault","username","val","subId","subTitle","fileName","getSignedRequestAndDownload","request","XMLHttpRequest","open","send","status","response","JSON","parse","responseText","downloadFile","signedUrl","alert","append","toBeRemoved","document","getElementById","parentNode","removeChild"],"mappings":";;AAACA,EAAE,QAAF,EAAYC,KAAZ,CAAkB,UAASC,CAAT,EAAW;AAC3B,MAAI,CAACA,EAAEC,MAAF,CAASC,KAAV,IAAmB,EAAEF,EAAEC,MAAF,CAASE,EAAT,IAAe,aAAjB,CAAvB,EAAuD;AAAE;AAAQ,GADtC,CACuC;AAClEH,IAAEI,cAAF;AACA,MAAIC,WAAWP,EAAE,iBAAF,EAAqBQ,GAArB,EAAf;AAAA,MACIC,QAAQT,EAAE,gBAAF,EAAoBQ,GAApB,EADZ;AAAA,MAEIE,WAAWV,EAAE,mBAAF,EAAuBQ,GAAvB,EAFf;AAAA,MAGIG,WAAWT,EAAEC,MAAF,CAASC,KAHxB;AAIAQ,8BAA4BD,QAA5B,EAAsCJ,QAAtC,EAAgDE,KAAhD,EAAuDC,QAAvD;AACD,CARD;;AAUD,SAASE,2BAAT,CAAqCD,QAArC,EAA+CJ,QAA/C,EAAyDE,KAAzD,EAAgEC,QAAhE,EAAyE;AACvE,MAAIG,UAAU,IAAIC,cAAJ,EAAd;AACAD,UAAQE,IAAR,CAAa,KAAb,EAAoB,YAAYR,QAAZ,GAAuB,UAAvB,GAAoCE,KAApC,GAA4C,MAA5C,GAAqDC,QAArD,GAAgE,YAAhE,GAA+EC,QAAnG,EAA6G,KAA7G;AACAE,UAAQG,IAAR;AACA,MAAIH,QAAQI,MAAR,KAAmB,GAAvB,EAA4B;AAC1B,QAAMC,WAAWC,KAAKC,KAAL,CAAWP,QAAQQ,YAAnB,CAAjB;AACAC,iBAAaJ,SAASK,SAAtB,EAAiCL,SAASP,QAA1C;AACD,GAHD,MAII;AAAEa,UAAM,2BAAN;AAAoC;AAC3C;;AAED,SAASF,YAAT,CAAsBC,SAAtB,EAAiCZ,QAAjC,EAA0C;AACtCX,IAAE,MAAF,EAAUyB,MAAV,eAA6BF,SAA7B,8BAA+DZ,QAA/D;AACA,MAAIe,cAAcC,SAASC,cAAT,CAAwB,MAAxB,CAAlB;AACAF,cAAYzB,KAAZ;AACAyB,cAAYG,UAAZ,CAAuBC,WAAvB,CAAmCJ,WAAnC;AACH","file":"frontEndS3Download.js","sourcesContent":[" $('button').click(function(e){\n   if (!e.target.value || !(e.target.id == 'downloadAdd')){ return } // Because these buttons are created dynamically\n   e.preventDefault();\n   let username = $('#whistlerClient').val(),\n       subId = $('#whistlerSubId').val(),\n       subTitle = $('#whistlerSubTitle').val(),\n       fileName = e.target.value;\n   getSignedRequestAndDownload(fileName, username, subId, subTitle);\n });\n\nfunction getSignedRequestAndDownload(fileName, username, subId, subTitle){\n  let request = new XMLHttpRequest();\n  request.open('GET', '/index/' + username + '/submit/' + subId + '/s3/' + subTitle + '/download/' + fileName, false);\n  request.send();\n  if (request.status === 200) {\n    const response = JSON.parse(request.responseText);\n    downloadFile(response.signedUrl, response.fileName);\n  }\n  else{ alert('Could not get signed URL.') }\n}\n\nfunction downloadFile(signedUrl, fileName){\n    $('body').append(`<a href=\"${signedUrl}\" id=\"link\" download=\"${fileName}\"  style=\"visibility: hidden;\">.</a>`);\n    let toBeRemoved = document.getElementById(\"link\");\n    toBeRemoved.click();\n    toBeRemoved.parentNode.removeChild(toBeRemoved);\n}    "]}